@import models.classes.Car
@import models.enums.CarListingStatus
@(car: Car, csrfToken: play.filters.csrf.CSRF.Token, role: String)

@* arguments to main: title, stylesheet, javascript, right *@
@main("Update Listing Price",role) {
    <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/change_password.css")">
} {
    <script src="@routes.Assets.versioned("javascripts/dashboard.js")" type="text/javascript"></script>
} {
    <div id="right">
        <div id="right-top">
            <div id="right-top-title">@car.make @car.model @car.modelYear</div>
            <div id="right-top-buttons">
            @if(car.status.equals(CarListingStatus.SOLD)){
                <button class="button-top-grey" onclick="display_car_details(`@car.listingID`)">Cancel</button>
            }else{
                <button class="button-top-grey" onclick="display_car_details(`@car.listingID`)">Cancel</button>
                <button class="button-top-red" form="new-car-form" onclick="update_car_price(`@car.listingID`); return false;">Update</button>
            }
            </div>
        </div>
        <div id="right-bottom">
            <form id="new-car-form">
                <input type="hidden" id="csrfToken" value="@csrfToken.value">

                @if(car.status.equals(CarListingStatus.SOLD)){
                    <div class="form-title">Price cannot be updated as listing is sold.</div>
                }else{
                    <div class="form-title">Update Listing Price</div>
                    <br>
                    <div class="form-field">
                        <label for="current-price">Current Price</label>
                        <input type="text" id="current-price" value="@car.currency @car.price" readonly>
                    </div>

                    <div class="form-field">
                        <label for="new-price">New Price</label>
                        <input type="number" id="new-price" placeholder="Enter Price @car.currency">
                    </div>
                }
            </form>
        </div>
    </div>

}